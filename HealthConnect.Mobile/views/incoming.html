<!DOCTYPE html>

<html>
    <head>
        <title>Referral Incoming</title>
    </head>
    <body>
         <div id="tabstrip-incoming" data-role="view" data-title="Incoming Referrals" 
             data-model="app.incomingService.viewModel"
             data-show="app.incomingService.viewModel.refreshData">
           <div style="text-align: right">
             <a data-role="listview-link" data-bind="text: selectedTimeFrame.name" 
                 href="views/timeFrames.html?back=incoming"></a>
           </div>
        
      <ul data-icon="details" data-role="listview" data-template="incoming-template" 
          data-source="app.incomingDataSource" 
          data-click="app.incomingService.viewModel.listViewClick"></ul>
        <script type="text/x-kendo-templ" id="incoming-template">
            <span>#: data.ReferralDate #</span>
      		#= app.incomingService.viewModel.renderDetailsTemplate(data) #
		</script>
        <script id="incoming-details-template" type="text/x-kendo-template">
           <ul style="list-style: none;" class="incoming-details">
            # $.each(data.IncomingReferralDetails, function (index, item) {
            # <li data-icon="details" style="border-bottom: 1px solid;"> 
            	<div>${item.OfficeName}</div>
                # if(item.AppointmentDateTime){ #
                <div>Scheduled for ${item.AppointmentDate} at ${item.AppointmentTime}</div>
               # }#
              </li>#                        
              }); 
            #
            </ul>
		</script>
    </div>
    </body>
</html>

